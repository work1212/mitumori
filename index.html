<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ã‚¯ãƒ¼ãƒªã‚¯ ãŠè¦‹ç©ã‚‚ã‚Š</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@300;400;700&family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --cream: #faf7f2;
    --warm-white: #fff9f0;
    --brown: #5c3d2e;
    --brown-light: #8b6347;
    --gold: #c9973a;
    --gold-light: #e8c47a;
    --sage: #7a9e7e;
    --rose: #d4826a;
    --dark: #2a1f15;
    --shadow: rgba(92,61,46,0.12);
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Noto Sans JP', sans-serif; background: var(--cream); color: var(--dark); min-height: 100vh; }

  .header {
    background: var(--brown); padding: 20px 40px;
    display: flex; align-items: center; gap: 16px;
    position: sticky; top: 0; z-index: 100;
    box-shadow: 0 2px 20px rgba(0,0,0,0.2);
  }
  .header-paw { font-size: 28px; animation: bounce 2s infinite; }
  @keyframes bounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-4px)} }
  .header h1 { font-family:'Noto Serif JP',serif; color:var(--gold-light); font-size:22px; font-weight:700; letter-spacing:0.08em; }
  .header p { color:rgba(255,255,255,0.6); font-size:12px; margin-left:auto; }

  .container { max-width: 920px; margin: 0 auto; padding: 36px 20px 80px; }

  .card {
    background: var(--warm-white); border-radius: 16px; padding: 26px 30px;
    margin-bottom: 18px; border: 1px solid rgba(92,61,46,0.1);
    box-shadow: 0 4px 20px var(--shadow); transition: box-shadow 0.3s;
  }
  .card:hover { box-shadow: 0 8px 32px var(--shadow); }

  .section-title {
    font-family:'Noto Serif JP',serif; font-size:17px; color:var(--brown); font-weight:700;
    margin-bottom:6px; display:flex; align-items:center; gap:10px;
  }
  .section-title::before { content:''; display:block; width:4px; height:20px; background:var(--gold); border-radius:2px; }
  .section-sub { font-size:12px; color:var(--brown-light); margin-bottom:16px; padding-left:14px; }

  .field-row { display:grid; grid-template-columns:1fr 1fr; gap:14px; margin-bottom:14px; }
  .field label { display:block; font-size:12px; color:var(--brown-light); margin-bottom:5px; font-weight:500; }
  .field input[type="number"], .field input[type="text"] {
    width:100%; padding:10px 14px; border:1.5px solid rgba(92,61,46,0.2);
    border-radius:10px; font-family:'Noto Sans JP',sans-serif; font-size:14px;
    color:var(--dark); background:white; outline:none; transition:border-color 0.2s,box-shadow 0.2s;
  }
  .field input:focus { border-color:var(--gold); box-shadow:0 0 0 3px rgba(201,151,58,0.12); }

  .staff-row { display:flex; align-items:center; gap:12px; margin-bottom:18px; }
  .staff-row label { font-size:13px; color:var(--brown-light); min-width:88px; }
  .staff-row input {
    flex:1; padding:10px 14px; border:1.5px solid rgba(92,61,46,0.2); border-radius:10px;
    font-family:'Noto Sans JP',sans-serif; font-size:14px; outline:none; background:white; transition:border-color 0.2s;
  }
  .staff-row input:focus { border-color:var(--gold); }

  .chip-group { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:4px; }
  .chip {
    padding:8px 14px; border-radius:50px; font-size:12px; font-weight:500;
    cursor:pointer; border:1.5px solid rgba(92,61,46,0.2); background:white;
    color:var(--brown-light); transition:all 0.2s; user-select:none;
    font-family:'Noto Sans JP',sans-serif; text-align:center; line-height:1.5;
  }
  .chip:hover { border-color:var(--gold); color:var(--gold); }
  .chip.active { background:var(--brown); border-color:var(--brown); color:white; }

  .sub-label { font-size:12px; color:var(--brown-light); margin-bottom:8px; font-weight:500; }

  .food-weight-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin-bottom:10px; }
  .weight-chip {
    padding:10px 8px; text-align:center; border-radius:12px; font-size:13px; font-weight:500;
    cursor:pointer; border:1.5px solid rgba(92,61,46,0.2); background:white;
    color:var(--brown-light); transition:all 0.2s; user-select:none; font-family:'Noto Sans JP',sans-serif;
  }
  .weight-chip:hover { border-color:var(--sage); color:var(--sage); }
  .weight-chip.active { background:var(--sage); border-color:var(--sage); color:white; }
  .weight-chip span { display:block; font-size:10px; opacity:0.8; margin-top:2px; }

  .cap-badge {
    display:inline-block; margin-top:10px;
    background:rgba(201,151,58,0.12); border:1px solid rgba(201,151,58,0.3);
    color:var(--gold); font-size:11px; padding:4px 14px; border-radius:50px; font-weight:600;
  }

  .tip-box {
    background:rgba(201,151,58,0.08); border-left:3px solid var(--gold);
    padding:10px 14px; border-radius:0 8px 8px 0;
    font-size:11.5px; color:var(--brown-light); margin-top:14px; line-height:1.8;
  }
  .tip-rose {
    background:rgba(212,130,106,0.08); border-left:3px solid var(--rose);
    padding:10px 14px; border-radius:0 8px 8px 0;
    font-size:11.5px; color:var(--brown-light); margin-top:10px; line-height:1.8;
  }

  .plan-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:14px; margin-top:8px; }
  @media(max-width:680px){
    .plan-grid{grid-template-columns:1fr;}
    .field-row{grid-template-columns:1fr;}
    .food-weight-grid{grid-template-columns:repeat(3,1fr);}
  }

  .plan-card { border-radius:14px; overflow:hidden; border:1.5px solid rgba(92,61,46,0.1); background:white; }
  .plan-card:nth-child(1) { border-top:4px solid var(--brown-light); }
  .plan-card:nth-child(2) { border-top:4px solid var(--sage); }
  .plan-card:nth-child(3) { border-top:4px solid var(--rose); }

  .plan-header { padding:14px 16px 10px; }
  .plan-header h3 { font-family:'Noto Serif JP',serif; font-size:13px; font-weight:700; margin-bottom:3px; }
  .plan-card:nth-child(1) .plan-header h3 { color:var(--brown-light); }
  .plan-card:nth-child(2) .plan-header h3 { color:var(--sage); }
  .plan-card:nth-child(3) .plan-header h3 { color:var(--rose); }
  .plan-sublabel { font-size:10px; font-weight:600; }
  .plan-card:nth-child(2) .plan-sublabel { color:var(--sage); }
  .plan-card:nth-child(3) .plan-sublabel { color:var(--rose); }

  .plan-body { padding:0 14px 14px; }
  .plan-row { display:flex; justify-content:space-between; align-items:center; padding:5px 0; border-bottom:1px solid rgba(92,61,46,0.06); font-size:11px; }
  .plan-row:last-child { border-bottom:none; }
  .plan-row .nm { color:var(--brown-light); }
  .plan-row .vl { font-weight:600; color:var(--dark); }
  .plan-row .vl.neg { color:var(--rose); }

  .plan-total { background:rgba(92,61,46,0.04); border-radius:10px; padding:11px; margin-top:10px; text-align:center; }
  .plan-total .lbl { font-size:10px; color:var(--brown-light); margin-bottom:4px; }
  .plan-total .amt { font-family:'Noto Serif JP',serif; font-size:20px; font-weight:700; color:var(--brown); }

  .plan3-sep { margin-top:10px; border-top:1px dashed rgba(212,130,106,0.4); padding-top:10px; }
  .plan3-sep .sep-lbl { font-size:10px; color:var(--rose); font-weight:700; margin-bottom:6px; }

  .print-btn {
    display:block; width:100%; padding:14px; background:var(--brown); color:white;
    border:none; border-radius:12px; font-family:'Noto Sans JP',sans-serif; font-size:14px; font-weight:700;
    cursor:pointer; letter-spacing:0.05em; transition:background 0.2s,transform 0.1s; margin-top:10px;
  }
  .print-btn:hover { background:var(--dark); transform:translateY(-1px); }

  @media print {
    .header{position:static;} .no-print{display:none;}
    .card{box-shadow:none;border:1px solid #ddd;break-inside:avoid;}
  }
</style>
</head>
<body>

<div class="header">
  <span class="header-paw">ğŸ¾</span>
  <h1>ã‚¯ãƒ¼ãƒªã‚¯ ãŠè¦‹ç©ã‚‚ã‚Šã‚·ã‚¹ãƒ†ãƒ </h1>
  <p>æ‹…å½“ï¼š<span id="staffDisplay">â€”</span></p>
</div>

<div class="container">

  <!-- åŸºæœ¬æƒ…å ± -->
  <div class="card">
    <div class="section-title">åŸºæœ¬æƒ…å ±</div>
    <div class="section-sub">æ‹…å½“è€…åã¨ç”Ÿä½“æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
    <div class="staff-row">
      <label>ãŠè¦‹ç©æ‹…å½“</label>
      <input type="text" id="staff" placeholder="ä¾‹ï¼šä½è—¤" oninput="document.getElementById('staffDisplay').textContent=this.value||'â€”';calc()">
    </div>
    <div class="field-row">
      <div class="field">
        <label>ç”Ÿä½“ç•ªå·</label>
        <input type="text" id="seibanumber" placeholder="ä¾‹ï¼šA-001" oninput="calc()">
      </div>
      <div class="field">
        <label>ç”Ÿä½“åï¼ˆç¨®åˆ¥ï¼‰</label>
        <input type="text" id="seibaname" placeholder="ä¾‹ï¼šãƒãƒ³ãƒã‚«ãƒ³" oninput="calc()">
      </div>
    </div>
    <div class="field-row">
      <div class="field">
        <label>ç”Ÿä½“ä¾¡æ ¼ï¼ˆå††ãƒ»ç¨æŠœï¼‰</label>
        <input type="number" id="price" placeholder="ä¾‹ï¼š300000" oninput="calc()" min="0" step="1000">
      </div>
      <div class="field">
        <label>çŠ¬ç±ãƒ»ç‹‚çŠ¬ç—…ç™»éŒ²æ‰‹æ•°æ–™ï¼ˆå††ï¼‰</label>
        <input type="number" id="kenreg" placeholder="0" oninput="calc()" min="0" value="0">
      </div>
    </div>
  </div>

  <!-- ãƒ¯ã‚¯ãƒãƒ³ -->
  <div class="card">
    <div class="section-title">â‘¡ ãƒ¯ã‚¯ãƒãƒ³å›æ•°ï¼ˆå®‰å¿ƒãƒ‘ãƒƒã‚¯ï¼‰</div>
    <div class="section-sub">ãƒ¯ã‚¯ãƒãƒ³ä»£ãƒ»ãƒã‚¤ã‚¯ãƒ­ãƒãƒƒãƒ—ãƒ»éºä¼å­ç—…æ¤œæŸ»1é …ç›®è¾¼ã¿</div>
    <div class="chip-group" id="vaccineGroup">
      <div class="chip active" data-val="ãƒ¯ã‚¯ãƒãƒ³1å›" onclick="selectChip(this,'vaccineGroup','vaccine')">ãƒ¯ã‚¯ãƒãƒ³1å›<br><small>Â¥68,000</small></div>
      <div class="chip" data-val="ãƒ¯ã‚¯ãƒãƒ³2å›" onclick="selectChip(this,'vaccineGroup','vaccine')">ãƒ¯ã‚¯ãƒãƒ³2å›<br><small>Â¥75,000</small></div>
      <div class="chip" data-val="ãƒ¯ã‚¯ãƒãƒ³3å›" onclick="selectChip(this,'vaccineGroup','vaccine')">ãƒ¯ã‚¯ãƒãƒ³3å›<br><small>Â¥82,000</small></div>
    </div>
  </div>

  <!-- ç”Ÿå‘½ä¿éšœ -->
  <div class="card">
    <div class="section-title">â‘¢ ç”Ÿå‘½ä¿éšœæœŸé–“</div>
    <div class="section-sub">ç—…æ°—ã‚„æ€ªæˆ‘ã§ä¸‡ä¸€ã®éš›ã®ä¿éšœï¼ˆç”Ÿä½“ä¾¡æ ¼ï¼‹å®‰å¿ƒãƒ‘ãƒƒã‚¯åˆè¨ˆã«å¯¾ã—ã¦ã®å‰²åˆï¼‰</div>
    <div class="chip-group" id="lifeGroup">
      <div class="chip" data-val="1ãƒµæœˆ" onclick="selectChip(this,'lifeGroup','life')">1ãƒµæœˆ<br><small>10%</small></div>
      <div class="chip" data-val="3ãƒµæœˆ" onclick="selectChip(this,'lifeGroup','life')">3ãƒµæœˆ<br><small>15%</small></div>
      <div class="chip" data-val="6ãƒµæœˆ" onclick="selectChip(this,'lifeGroup','life')">6ãƒµæœˆ<br><small>20%</small></div>
      <div class="chip" data-val="12ãƒµæœˆ" onclick="selectChip(this,'lifeGroup','life')">12ãƒµæœˆ<br><small>25%</small></div>
      <div class="chip active" data-val="24ãƒµæœˆ" onclick="selectChip(this,'lifeGroup','life')">24ãƒµæœˆ<br><small>30%</small></div>
      <div class="chip" data-val="36ãƒµæœˆ" onclick="selectChip(this,'lifeGroup','life')">36ãƒµæœˆ<br><small>35%</small></div>
      <div class="chip" data-val="60ãƒµæœˆ" onclick="selectChip(this,'lifeGroup','life')">60ãƒµæœˆ<br><small>40%</small></div>
      <div class="chip" data-val="100ãƒµæœˆ" onclick="selectChip(this,'lifeGroup','life')">100ãƒµæœˆ<br><small>50%</small></div>
    </div>
  </div>

  <!-- éºä¼å­æ¤œæŸ» -->
  <div class="card">
    <div class="section-title">â‘£â‘¤ éºä¼å­æ¤œæŸ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³</div>
    <div style="margin-bottom:18px">
      <div class="sub-label">è¿½åŠ éºä¼å­æ¤œæŸ»</div>
      <div class="chip-group" id="geneGroup">
        <div class="chip active" data-val="è¿½åŠ é …ç›®ãªã—" onclick="selectChip(this,'geneGroup','gene')">è¿½åŠ ãªã—<br><small>Â¥0</small></div>
        <div class="chip" data-val="è¿½åŠ 1é …ç›®" onclick="selectChip(this,'geneGroup','gene')">è¿½åŠ 1é …ç›®<br><small>Â¥5,000</small></div>
        <div class="chip" data-val="è¿½åŠ 2é …ç›®" onclick="selectChip(this,'geneGroup','gene')">è¿½åŠ 2é …ç›®<br><small>Â¥8,000</small></div>
      </div>
    </div>
    <div>
      <div class="sub-label">éºä¼å­æ¤œæŸ»è¨¼æ˜æ›¸</div>
      <div class="chip-group" id="certGroup">
        <div class="chip active" data-val="å¯¾è±¡å¤–" onclick="selectChip(this,'certGroup','cert')">å¯¾è±¡å¤–<br><small>Â¥0</small></div>
        <div class="chip" data-val="æ¤œæŸ»æœ‰" onclick="selectChip(this,'certGroup','cert')">æ¤œæŸ»æœ‰<br><small>Â¥1,000</small></div>
      </div>
    </div>
  </div>

  <!-- ãƒ•ãƒ¼ãƒ‰ã‚³ãƒ¼ã‚¹ -->
  <div class="card">
    <div class="section-title">ğŸ¶ğŸ± ãƒ•ãƒ¼ãƒ‰ã‚³ãƒ¼ã‚¹é¸æŠ</div>
    <div class="section-sub">æˆçŠ¬æ™‚ã®ä½“é‡ç›®å®‰ã€ã¾ãŸã¯çŒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚å‰²å¼•ä¸Šé™ãŒå¤‰ã‚ã‚Šã¾ã™ã€‚</div>

    <div class="food-weight-grid" id="weightGroup">
      <div class="weight-chip active" data-cap="80000" onclick="selectWeight(this,'çŒ«',80000)">ğŸ± çŒ«<span>ä¸Šé™ 8ä¸‡å††</span></div>
      <div class="weight-chip" data-cap="80000" onclick="selectWeight(this,'3kg',80000)">3kg<span>ä¸Šé™ 8ä¸‡å††</span></div>
      <div class="weight-chip" data-cap="80000" onclick="selectWeight(this,'5kg',80000)">5kg<span>ä¸Šé™ 8ä¸‡å††</span></div>
      <div class="weight-chip" data-cap="80000" onclick="selectWeight(this,'8kg',80000)">8kg<span>ä¸Šé™ 8ä¸‡å††</span></div>
      <div class="weight-chip" data-cap="80000" onclick="selectWeight(this,'10kg',80000)">10kg<span>ä¸Šé™ 8ä¸‡å††</span></div>
      <div class="weight-chip" data-cap="160000" onclick="selectWeight(this,'15kg',160000)">15kg<span>ä¸Šé™ 16ä¸‡å††</span></div>
      <div class="weight-chip" data-cap="160000" onclick="selectWeight(this,'20kg',160000)">20kg<span>ä¸Šé™ 16ä¸‡å††</span></div>
      <div class="weight-chip" data-cap="200000" onclick="selectWeight(this,'30kg',200000)">30kg<span>ä¸Šé™ 20ä¸‡å††</span></div>
      <div class="weight-chip" data-cap="200000" onclick="selectWeight(this,'40kg',200000)">40kg<span>ä¸Šé™ 20ä¸‡å††</span></div>
    </div>

    <div id="capBadge" class="cap-badge">ğŸ”– ç¾åœ¨ã®å‰²å¼•ä¸Šé™ï¼šÂ¥80,000ï¼ˆçŒ«ãƒ»ã€œ10kgï¼‰</div>

    <div style="margin-top:22px">
      <div class="sub-label">ãƒ•ãƒ¼ãƒ‰å®šæœŸãƒ—ãƒ©ãƒ³ã®æœŸé–“ï¼ˆâ‘¡ãƒ—ãƒ©ãƒ³ã§é©ç”¨ï¼‰</div>
      <div class="chip-group" id="foodGroup">
        <div class="chip active" data-val="5å¹´ãƒ—ãƒ©ãƒ³" onclick="selectChip(this,'foodGroup','food')">5å¹´ãƒ—ãƒ©ãƒ³<br><small>50%å‰²å¼•</small></div>
        <div class="chip" data-val="3å¹´ãƒ—ãƒ©ãƒ³" onclick="selectChip(this,'foodGroup','food')">3å¹´ãƒ—ãƒ©ãƒ³<br><small>15%å‰²å¼•</small></div>
        <div class="chip" data-val="1å¹´ãƒ—ãƒ©ãƒ³" onclick="selectChip(this,'foodGroup','food')">1å¹´ãƒ—ãƒ©ãƒ³<br><small>5%å‰²å¼•</small></div>
        <div class="chip" data-val="ãªã—" onclick="selectChip(this,'foodGroup','food')">ãƒ—ãƒ©ãƒ³ãªã—</div>
      </div>
    </div>

    <div class="tip-box">
      â˜… å®šæœŸãƒ—ãƒ©ãƒ³5å¹´ï¼šï¼ˆç”Ÿä½“ä¾¡æ ¼ï¼‹å®‰å¿ƒãƒ‘ãƒƒã‚¯ï¼‰Ã—50% å‰²å¼•ï¼ˆä¸Šé™ã‚­ãƒ£ãƒƒãƒ—ã‚ã‚Šï¼‰<br>
      â˜… å®šæœŸãƒ—ãƒ©ãƒ³3å¹´ï¼šç”Ÿä½“ä¾¡æ ¼ Ã—15% å‰²å¼•ï¼ˆä¸Šé™ã‚­ãƒ£ãƒƒãƒ—ã‚ã‚Šï¼‰<br>
      â˜… å®šæœŸãƒ—ãƒ©ãƒ³1å¹´ï¼šç”Ÿä½“ä¾¡æ ¼ Ã—5% å‰²å¼•ï¼ˆä¸Šé™ã‚­ãƒ£ãƒƒãƒ—ã‚ã‚Šï¼‰
    </div>
    <div class="tip-rose">
      â˜… ã‚ã‚“ã—ã‚“MAX70%å‰²ï¼šãƒ•ãƒ¼ãƒ‰5å¹´å‰²å¼•å¾Œã®æ®‹é¡ã«ã•ã‚‰ã«25%å¼•ã ï¼‹ ç”Ÿå‘½ä¿éšœã¯ã‚«ãƒ¼ãƒ‰æ‰•ã„åˆ†é›¢<br>
      â€» ãƒ•ãƒ¼ãƒ‰å®šæœŸãƒ—ãƒ©ãƒ³ãƒ»ã‚ã‚“ã—ã‚“MAX70%å‰²ã¯ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰å¿…é ˆï¼ˆãƒ‡ãƒ“ãƒƒãƒˆãƒ»ãƒãƒ³ãƒ‰ãƒ«ä¸å¯ï¼‰
    </div>
  </div>

  <!-- çµæœ -->
  <div class="card">
    <div class="section-title">ğŸ“‹ ãŠè¦‹ç©ã‚‚ã‚Šçµæœ</div>
    <div class="section-sub" id="resultSubtitle">ç”Ÿä½“åï¼šâ€” ï½œ æ‹…å½“ï¼šâ€” ï½œ ãƒ•ãƒ¼ãƒ‰ã‚³ãƒ¼ã‚¹ï¼šâ€”</div>

    <div class="plan-grid">

      <!-- Plan 1 -->
      <div class="plan-card">
        <div class="plan-header">
          <h3>â‘  å‰²å¼•ãªã—ãƒ—ãƒ©ãƒ³</h3>
          <div class="plan-sublabel" style="color:#bbb">æ¨™æº–ãƒ—ãƒ©ãƒ³</div>
        </div>
        <div class="plan-body">
          <div class="plan-row"><span class="nm">ç”Ÿä½“ä¾¡æ ¼</span><span class="vl" id="p1-seiba">â€”</span></div>
          <div class="plan-row"><span class="nm">å®‰å¿ƒãƒ‘ãƒƒã‚¯</span><span class="vl" id="p1-pack">â€”</span></div>
          <div class="plan-row"><span class="nm">ç”Ÿå‘½ä¿éšœ</span><span class="vl" id="p1-life">â€”</span></div>
          <div class="plan-row"><span class="nm">è¿½åŠ éºä¼æ¤œæŸ»</span><span class="vl" id="p1-gene">â€”</span></div>
          <div class="plan-row"><span class="nm">éºä¼å­è¨¼æ˜æ›¸</span><span class="vl" id="p1-cert">â€”</span></div>
          <div class="plan-row"><span class="nm">çŠ¬ç±ãƒ»ç‹‚çŠ¬ç—…</span><span class="vl" id="p1-ken">â€”</span></div>
          <div class="plan-row"><span class="nm">å°è¨ˆ</span><span class="vl" id="p1-sub">â€”</span></div>
          <div class="plan-row"><span class="nm">æ¶ˆè²»ç¨(10%)</span><span class="vl" id="p1-tax">â€”</span></div>
          <div class="plan-total">
            <div class="lbl">åˆè¨ˆï¼ˆç¨è¾¼ï¼‰</div>
            <div class="amt" id="p1-total">â€”</div>
          </div>
        </div>
      </div>

      <!-- Plan 2 -->
      <div class="plan-card">
        <div class="plan-header">
          <h3>â‘¡ ãƒ•ãƒ¼ãƒ‰å®šæœŸãƒ—ãƒ©ãƒ³</h3>
          <div class="plan-sublabel" id="p2-planlabel">5å¹´ãƒ—ãƒ©ãƒ³ 50%å‰²å¼•</div>
        </div>
        <div class="plan-body">
          <div class="plan-row"><span class="nm">ç”Ÿä½“ä¾¡æ ¼</span><span class="vl" id="p2-seiba">â€”</span></div>
          <div class="plan-row"><span class="nm">å®‰å¿ƒãƒ‘ãƒƒã‚¯</span><span class="vl" id="p2-pack">â€”</span></div>
          <div class="plan-row"><span class="nm">ç”Ÿå‘½ä¿éšœ</span><span class="vl" id="p2-life">â€”</span></div>
          <div class="plan-row"><span class="nm">è¿½åŠ éºä¼æ¤œæŸ»</span><span class="vl" id="p2-gene">â€”</span></div>
          <div class="plan-row"><span class="nm">éºä¼å­è¨¼æ˜æ›¸</span><span class="vl" id="p2-cert">â€”</span></div>
          <div class="plan-row"><span class="nm">çŠ¬ç±ãƒ»ç‹‚çŠ¬ç—…</span><span class="vl" id="p2-ken">â€”</span></div>
          <div class="plan-row"><span class="nm">å°è¨ˆ</span><span class="vl" id="p2-sub">â€”</span></div>
          <div class="plan-row"><span class="nm">æ¶ˆè²»ç¨(10%)</span><span class="vl" id="p2-tax">â€”</span></div>
          <div class="plan-row"><span class="nm">ãƒ•ãƒ¼ãƒ‰å‰²å¼•</span><span class="vl neg" id="p2-disc">â€”</span></div>
          <div class="plan-total">
            <div class="lbl">åˆè¨ˆï¼ˆç¨è¾¼ï¼‰</div>
            <div class="amt" id="p2-total">â€”</div>
          </div>
        </div>
      </div>

      <!-- Plan 3 -->
      <div class="plan-card">
        <div class="plan-header">
          <h3>â‘¢ ã‚ã‚“ã—ã‚“MAX70%å‰²</h3>
          <div class="plan-sublabel">ğŸŒŸ ã‚ªã‚¹ã‚¹ãƒ¡ï¼ï¼</div>
        </div>
        <div class="plan-body">
          <div class="plan-row"><span class="nm">ç”Ÿä½“ä¾¡æ ¼</span><span class="vl" id="p3-seiba">â€”</span></div>
          <div class="plan-row"><span class="nm">å®‰å¿ƒãƒ‘ãƒƒã‚¯</span><span class="vl" id="p3-pack">â€”</span></div>
          <div class="plan-row"><span class="nm">è¿½åŠ éºä¼æ¤œæŸ»</span><span class="vl" id="p3-gene">â€”</span></div>
          <div class="plan-row"><span class="nm">éºä¼å­è¨¼æ˜æ›¸</span><span class="vl" id="p3-cert">â€”</span></div>
          <div class="plan-row"><span class="nm">çŠ¬ç±ãƒ»ç‹‚çŠ¬ç—…</span><span class="vl" id="p3-ken">â€”</span></div>
          <div class="plan-row"><span class="nm">å°è¨ˆ</span><span class="vl" id="p3-sub">â€”</span></div>
          <div class="plan-row"><span class="nm">æ¶ˆè²»ç¨(10%)</span><span class="vl" id="p3-tax">â€”</span></div>
          <div class="plan-row"><span class="nm">ãƒ•ãƒ¼ãƒ‰å‰²å¼•(50%)</span><span class="vl neg" id="p3-fooddisc">â€”</span></div>
          <div class="plan-row"><span class="nm">MAX70%å‰²å¼•</span><span class="vl neg" id="p3-maxdisc">â€”</span></div>
          <div class="plan-total">
            <div class="lbl">ãŠè¿ãˆå½“æ—¥ç²¾ç®—ï¼ˆç¨è¾¼ï¼‰</div>
            <div class="amt" id="p3-daytotal">â€”</div>
          </div>
          <div class="plan3-sep">
            <div class="sep-lbl">ï¼‹ ç”Ÿå‘½ä¿éšœã‚«ãƒ¼ãƒ‰æ‰•ã„åˆ†ï¼ˆåˆ¥é€”ãƒ»100ãƒµæœˆå›ºå®šï¼‰</div>
            <div class="plan-row"><span class="nm">ç”Ÿå‘½ä¿éšœï¼ˆç¨è¾¼ï¼‰</span><span class="vl" id="p3-life">â€”</span></div>
            <div class="plan-total" style="background:rgba(212,130,106,0.07)">
              <div class="lbl">å½“æ—¥ç²¾ç®—ï¼‹ç”Ÿå‘½ä¿éšœ åˆè¨ˆ</div>
              <div class="amt" style="color:var(--rose);font-size:18px" id="p3-grandtotal">â€”</div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <button class="print-btn no-print" onclick="window.print()">ğŸ–¨ï¸ ã“ã®è¦‹ç©ã‚‚ã‚Šã‚’å°åˆ·ã™ã‚‹</button>
  </div>

</div>

<script>
// ============================================================
// çŠ¶æ…‹ç®¡ç†ï¼šå‰²å¼•ä¸Šé™(discountCap)ã‚’æ˜ç¤ºçš„ã«ç®¡ç†
// ============================================================
var gVaccine = 'ãƒ¯ã‚¯ãƒãƒ³1å›';
var gLife    = '24ãƒµæœˆ';
var gGene    = 'è¿½åŠ é …ç›®ãªã—';
var gCert    = 'å¯¾è±¡å¤–';
var gFood    = '5å¹´ãƒ—ãƒ©ãƒ³';
var gWeight  = 'çŒ«';
var gCap     = 80000;  // â† å‰²å¼•ä¸Šé™ï¼ˆçŒ«ãƒ»ã€œ10kgã¯8ä¸‡, 15ã€œ20kgã¯16ä¸‡, 30ã€œ40kgã¯20ä¸‡ï¼‰

function selectChip(el, groupId, key) {
  document.querySelectorAll('#' + groupId + ' .chip').forEach(function(c){ c.classList.remove('active'); });
  el.classList.add('active');
  var v = el.dataset.val;
  if (key === 'vaccine') gVaccine = v;
  else if (key === 'life') gLife = v;
  else if (key === 'gene') gGene = v;
  else if (key === 'cert') gCert = v;
  else if (key === 'food') gFood = v;
  calc();
}

function selectWeight(el, weightVal, capVal) {
  document.querySelectorAll('#weightGroup .weight-chip').forEach(function(c){ c.classList.remove('active'); });
  el.classList.add('active');
  gWeight = weightVal;
  gCap    = capVal;  // â† ç›´æ¥å¼•æ•°ã§æ•°å€¤ã‚’å—ã‘å–ã‚Šç¢ºå®Ÿã«è¨­å®š

  var badge = document.getElementById('capBadge');
  if (capVal === 80000)  badge.textContent = 'ğŸ”– ç¾åœ¨ã®å‰²å¼•ä¸Šé™ï¼šÂ¥80,000ï¼ˆçŒ«ãƒ»ã€œ10kgï¼‰';
  if (capVal === 160000) badge.textContent = 'ğŸ”– ç¾åœ¨ã®å‰²å¼•ä¸Šé™ï¼šÂ¥160,000ï¼ˆ15kgã€œ20kgï¼‰';
  if (capVal === 200000) badge.textContent = 'ğŸ”– ç¾åœ¨ã®å‰²å¼•ä¸Šé™ï¼šÂ¥200,000ï¼ˆ30kgã€œ40kgï¼‰';
  calc();
}

// ============================================================
// è¨ˆç®—ãƒ˜ãƒ«ãƒ‘ãƒ¼
// ============================================================
function packCost(v) {
  if (v === 'ãƒ¯ã‚¯ãƒãƒ³3å›') return 82000;
  if (v === 'ãƒ¯ã‚¯ãƒãƒ³2å›') return 75000;
  return 68000;
}

function lifeRate(l) {
  var map = {'1ãƒµæœˆ':0.10,'3ãƒµæœˆ':0.15,'6ãƒµæœˆ':0.20,'12ãƒµæœˆ':0.25,'24ãƒµæœˆ':0.30,'36ãƒµæœˆ':0.35,'60ãƒµæœˆ':0.40,'100ãƒµæœˆ':0.50};
  return map[l] || 0.30;
}

function geneCost(g) {
  if (g === 'è¿½åŠ 2é …ç›®') return 8000;
  if (g === 'è¿½åŠ 1é …ç›®') return 5000;
  return 0;
}

function certCost(c) {
  return c === 'æ¤œæŸ»æœ‰' ? 1000 : 0;
}

/**
 * ãƒ•ãƒ¼ãƒ‰å‰²å¼•é¡ã‚’è¨ˆç®—ï¼ˆä¸Šé™ã‚­ãƒ£ãƒƒãƒ—é©ç”¨æ¸ˆã¿ï¼‰
 * cap ã¯å¿…ãšå¤–éƒ¨ã‹ã‚‰æ¸¡ã™ã“ã¨
 */
function calcFoodDisc(seiba, vaccine, plan, cap) {
  // ã‚¨ã‚¯ã‚»ãƒ«å¼æº–æ‹ ï¼šãƒ¯ã‚¯ãƒãƒ³å›æ•°é–¢ä¿‚ãªãå¸¸ã«(seiba+pack)ã‚’åŸºæº–ã«è¨ˆç®—
  var pack = packCost(vaccine);
  var raw = 0;
  if (plan === '5å¹´ãƒ—ãƒ©ãƒ³')      raw = (seiba + pack) * 0.50;
  else if (plan === '3å¹´ãƒ—ãƒ©ãƒ³') raw = (seiba + pack) * 0.15;
  else if (plan === '1å¹´ãƒ—ãƒ©ãƒ³') raw = (seiba + pack) * 0.05;
  return raw > cap ? cap : raw;
}

function fmt(n) {
  if (n === null || n === undefined || isNaN(n)) return 'â€”';
  return 'Â¥' + Math.round(n).toLocaleString('ja-JP');
}

function fmtNeg(n) {
  var v = Math.abs(Math.round(n));
  return v === 0 ? 'Â¥0' : 'â–²Â¥' + v.toLocaleString('ja-JP');
}

function setText(id, val) {
  var el = document.getElementById(id);
  if (el) el.textContent = val;
}

// ============================================================
// ãƒ¡ã‚¤ãƒ³è¨ˆç®—
// ============================================================
function calc() {
  var seiba  = parseFloat(document.getElementById('price').value)  || 0;
  var kenreg = parseFloat(document.getElementById('kenreg').value) || 0;
  var seibaname   = document.getElementById('seibaname').value   || 'â€”';
  var staff       = document.getElementById('staff').value       || 'â€”';
  var seibanumber = document.getElementById('seibanumber').value || 'â€”';

  document.getElementById('resultSubtitle').textContent =
    'ç”Ÿä½“åï¼š' + seibaname + ' (' + seibanumber + ')ã€€ï½œã€€æ‹…å½“ï¼š' + staff + 'ã€€ï½œã€€ãƒ•ãƒ¼ãƒ‰ã‚³ãƒ¼ã‚¹ï¼š' + gWeight;

  var pack = packCost(gVaccine);
  var lr   = lifeRate(gLife);
  var gc   = geneCost(gGene);
  var cc   = certCost(gCert);
  var cap  = gCap;  // â† ã“ã®æ™‚ç‚¹ã§ç¢ºå®šã—ãŸä¸Šé™

  // â”€â”€ Plan 1: å‰²å¼•ãªã— â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  var p1Life = (seiba + pack) * lr;
  var p1Sub  = seiba + pack + p1Life + gc + cc + kenreg;
  var p1Tax  = p1Sub * 0.1;
  setText('p1-seiba', fmt(seiba));
  setText('p1-pack',  fmt(pack));
  setText('p1-life',  fmt(p1Life));
  setText('p1-gene',  fmt(gc));
  setText('p1-cert',  fmt(cc));
  setText('p1-ken',   fmt(kenreg));
  setText('p1-sub',   fmt(p1Sub));
  setText('p1-tax',   fmt(p1Tax));
  setText('p1-total', fmt(p1Sub + p1Tax));

  // â”€â”€ Plan 2: ãƒ•ãƒ¼ãƒ‰å®šæœŸãƒ—ãƒ©ãƒ³ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  var p2Life = (seiba + pack) * lr;
  var p2Sub  = seiba + pack + p2Life + gc + cc + kenreg;
  var p2Tax  = p2Sub * 0.1;
  var p2Disc = calcFoodDisc(seiba, gVaccine, gFood, cap);
  var p2Total = p2Sub + p2Tax - p2Disc;
  var foodLabels = {'5å¹´ãƒ—ãƒ©ãƒ³':'5å¹´ãƒ—ãƒ©ãƒ³ 50%å‰²å¼•','3å¹´ãƒ—ãƒ©ãƒ³':'3å¹´ãƒ—ãƒ©ãƒ³ 15%å‰²å¼•','1å¹´ãƒ—ãƒ©ãƒ³':'1å¹´ãƒ—ãƒ©ãƒ³ 5%å‰²å¼•','ãªã—':'å‰²å¼•ãªã—'};
  setText('p2-planlabel', foodLabels[gFood] || '');
  setText('p2-seiba', fmt(seiba));
  setText('p2-pack',  fmt(pack));
  setText('p2-life',  fmt(p2Life));
  setText('p2-gene',  fmt(gc));
  setText('p2-cert',  fmt(cc));
  setText('p2-ken',   fmt(kenreg));
  setText('p2-sub',   fmt(p2Sub));
  setText('p2-tax',   fmt(p2Tax));
  setText('p2-disc',  fmtNeg(p2Disc));
  setText('p2-total', fmt(p2Total));

  // â”€â”€ Plan 3: ã‚ã‚“ã—ã‚“MAX70%å‰² â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // ç”Ÿå‘½ä¿éšœã¯ã‚«ãƒ¼ãƒ‰æ‰•ã„ã§åˆ¥é€”ï¼ˆå½“æ—¥ç²¾ç®—ã‹ã‚‰é™¤å¤–ï¼‰
  var p3Sub  = seiba + pack + gc + cc + kenreg;
  var p3Tax  = p3Sub * 0.1;

  // ãƒ•ãƒ¼ãƒ‰5å¹´å‰²å¼•ï¼ˆä¸Šé™ã‚­ãƒ£ãƒƒãƒ—é©ç”¨ï¼‰
  var p3FoodDisc = calcFoodDisc(seiba, gVaccine, '5å¹´ãƒ—ãƒ©ãƒ³', cap);

  // ã‚ã‚“ã—ã‚“MAXè¿½åŠ å‰²å¼•ï¼šã‚¨ã‚¯ã‚»ãƒ«å¼æº–æ‹ 
  // ãƒ¯ã‚¯ãƒãƒ³1,2å›: (seiba - ãƒ•ãƒ¼ãƒ‰å‰²å¼•é¡) Ã— 25%
  // ãƒ¯ã‚¯ãƒãƒ³3å›:   (seiba - MIN(cap, seiba*50%)) Ã— 25%  â† ã‚¨ã‚¯ã‚»ãƒ«ã¯cap=8ä¸‡å›ºå®šã ãŒ capå¤‰æ•°ã‚’ä½¿ç”¨
  var p3MaxBase = seiba - p3FoodDisc;
  var p3MaxDisc = p3MaxBase * 0.25;

  var p3DayTotal = p3Sub + p3Tax - p3FoodDisc - p3MaxDisc;

  // ç”Ÿå‘½ä¿éšœã¯é¸æŠã—ãŸä¿éšœæœŸé–“ã§ç¨è¾¼è¡¨ç¤º
  // ã‚ã‚“ã—ã‚“MAXãƒ—ãƒ©ãƒ³ã¯ç”Ÿå‘½ä¿éšœ100ãƒ¶æœˆãŒå¿…é ˆï¼ˆä»–ã®é¸æŠã«é–¢ã‚ã‚‰ãšå›ºå®šï¼‰
  var p3LifeRate = 0.50;  // 100ãƒ¶æœˆå›ºå®š = 50%
  var p3LifeAmt  = (seiba + pack) * p3LifeRate * 1.1;
  var p3Grand    = p3DayTotal + p3LifeAmt;

  setText('p3-seiba',     fmt(seiba));
  setText('p3-pack',      fmt(pack));
  setText('p3-gene',      fmt(gc));
  setText('p3-cert',      fmt(cc));
  setText('p3-ken',       fmt(kenreg));
  setText('p3-sub',       fmt(p3Sub));
  setText('p3-tax',       fmt(p3Tax));
  setText('p3-fooddisc',  fmtNeg(p3FoodDisc));
  setText('p3-maxdisc',   fmtNeg(p3MaxDisc));
  setText('p3-daytotal',  fmt(p3DayTotal));
  setText('p3-life',      fmt(p3LifeAmt) + 'ï¼ˆ100ãƒµæœˆãƒ»å›ºå®šï¼‰');
  setText('p3-grandtotal',fmt(p3Grand));
}

// åˆæœŸè¡¨ç¤º
calc();
</script>
</body>
</html>
